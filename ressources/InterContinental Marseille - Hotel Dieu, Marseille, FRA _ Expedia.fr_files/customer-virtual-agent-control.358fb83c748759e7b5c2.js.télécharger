(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{fboL:function(e,n,i){i.r(n),i.d(n,"VirtualAgentControl",(function(){return C}));var t,a,o,l,d,r=i("GiK3"),c=i("29+M"),u=i("/5Tq"),s=function(){return(s=Object.assign||function(e){for(var n,i=1,t=arguments.length;i<t;i++)for(var a in n=arguments[i])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};function v(e,n){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var t,a,o=i.call(e),l=[];try{for(;(void 0===n||n-- >0)&&!(t=o.next()).done;)l.push(t.value)}catch(d){a={error:d}}finally{try{t&&!t.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return l}function m(){var e,n;if("undefined"!=typeof window){if(null===(e=window)||void 0===e?void 0:e.c3WebChat)return window.c3WebChat;if(null===(n=window)||void 0===n?void 0:n.virtualAgentControl)return window.virtualAgentControl}}function p(e){if("function"==typeof window.atob){var n=window.atob(e);return JSON.parse(n)}}!function(e){e.DEBUG="DEBUG",e.NONE="NONE",e.PREVIEW="PREVIEW",e.RELEASED="RELEASED"}(t||(t={})),function(e){e.ANONYMOUS="ANONYMOUS",e.AUTHENTICATED="AUTHENTICATED",e.IDENTIFIED="IDENTIFIED"}(a||(a={})),function(e){e.V1="V1",e.V2="V2"}(o||(o={})),function(e){e.APP_PHONE="APP_PHONE",e.APP_TABLET="APP_TABLET",e.CHAT_APP="CHAT_APP",e.DESKTOP="DESKTOP",e.MOBILE_PHONE="MOBILE_PHONE",e.MOBILE_TABLET="MOBILE_TABLET",e.VOICE_APP="VOICE_APP"}(l||(l={})),function(e){e.CAN_NOT_TRACK="CAN_NOT_TRACK",e.CAN_TRACK="CAN_TRACK"}(d||(d={}));var k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatbotConfigQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"applicationName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"chatbotConfig"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"applicationName"},value:{kind:"Variable",name:{kind:"Name",value:"applicationName"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"authToken"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"channelOriginId"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"conversationProperties"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"launchPoint"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"enableAutoOpenChatWidget"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"enableProactiveConversation"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"javascriptUrl"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"versionId"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}],loc:{start:0,end:384,source:{body:"\nquery ChatbotConfigQuery($context: ContextInput!, $applicationName: String!) {\n  chatbotConfig(context:$context, applicationName:$applicationName) {\n    authToken\n    channelOriginId\n    conversationProperties {\n      launchPoint\n    }\n    enableAutoOpenChatWidget\n    enableProactiveConversation\n    version {\n      javascriptUrl {\n        value\n      }\n      versionId\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"localChatClient"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"localChatClientState"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"requested"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:78,source:{body:"\nquery localChatClient {\n  localChatClientState @client {\n    requested\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},f={__typename:"LocalChatClientState",requested:!1},C=function(e){var n=e.applicationName,i=e.clientOverrides,t=e.pageName,a=e.skipSsr,l=Object(u.useBexApi)().context,d=l.locale,C={context:l,applicationName:n},b=v(Object(r.useState)(m()),2),g=b[0],h=b[1],S=v(Object(r.useState)(!1),2),O=S[0],E=S[1],A=!!g,P=Object(c.c)(k,{variables:C,ssr:!a,skip:A}).data,T=Object(c.c)(N,{ssr:!a}),y=T.data,I=T.client;return Object(r.useEffect)((function(){var e;if(!g&&(null===(e=P)||void 0===e?void 0:e.chatbotConfig)&&(!y||!y.localChatClientState.requested)&&!O){E(!0),I.writeData({data:s(s({},P||{}),{localChatClientState:s(s({},f),{requested:!0})})});var n=P.chatbotConfig,a=P.chatbotConfig.version.javascriptUrl,l=function(e,n,i,t){var a,l,d,r,c,u,s,v,m,k,N,f,C;return{authToken:(null===(a=t)||void 0===a?void 0:a.authToken)||p(e.authToken),channelOriginId:(null===(l=t)||void 0===l?void 0:l.channelOriginId)||e.channelOriginId,containerElement:null===(d=t)||void 0===d?void 0:d.containerElement,conversationProperties:{launchPoint:(null===(c=null===(r=t)||void 0===r?void 0:r.conversationProperties)||void 0===c?void 0:c.launchPoint)||e.conversationProperties.launchPoint,pageName:n},embedded:null===(u=t)||void 0===u?void 0:u.embedded,enableAutoOpenChatWidget:(null===(s=t)||void 0===s?void 0:s.enableAutoOpenChatWidget)||e.enableAutoOpenChatWidget,enableProactiveConversation:(null===(v=t)||void 0===v?void 0:v.enableProactiveConversation)||e.enableProactiveConversation,fastRender:e.version.versionId===o.V2,intentMessage:null===(m=t)||void 0===m?void 0:m.intentMessage,languageId:(null===(k=t)||void 0===k?void 0:k.languageId)||i,subscribedEvents:null===(N=t)||void 0===N?void 0:N.subscribedEvents,eventHandler:null===(f=t)||void 0===f?void 0:f.eventHandler,userProperties:null===(C=t)||void 0===C?void 0:C.userProperties}}(n,t,d,i);document.head.appendChild(function(e,n){var i=document.createElement("script");return i.src=e,i.onload=n,i}(a.value,(function(){var e=m();e&&!O&&e.initialize(l).then((function(){h(e)}))})))}}),[g,P,y,O,I,t,d,i]),null};C.displayName="VirtualAgentControl"}}]);
//# sourceMappingURL=customer-virtual-agent-control.358fb83c748759e7b5c2.js.map